<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/pgGame/style/player.css">
    <title>Canvas Desenhável - Round {{ round_number }}</title>
</head>
<body>
    <!DOCTYPE html>
    <html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="/static/pgGame/style/player.css">
        <title>Canvas Desenhável - Round {{ round_number }}</title>
    </head>
    <body>
        <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-element-bundle.min.js"></script>
        <div class="message-screen" id="waitingMessage" style="display: none;">
            <img src="/static/images/player/Asset 2.svg" alt="">
            <span class="message-screen-span">De olho!</span>
            <p class="message-screen-p">Fique de olho na tela do host para receber as informações necessárias dos rounds.</p>
        </div>
        <div class="message-screen" id="oopsMessage" style="display: none;">
            <span class="message-screen-span">Oops!</span>
            <p class="message-screen-p">Parece que você perdeu o fio da meada, a partida já está rolando...</p>
            <button onclick="backToBox()" class="primary-btn">Voltar à Caixa</button>
        </div>
        <div class="message-screen" id="oopsHostMessage" style="display: none;">
            <span class="message-screen-span">Oops!</span>
            <p class="message-screen-p">Parece que o host se desconectou, aguarde um host se conectar novamente...</p>
            <button onclick="backToBox()" class="primary-btn">Voltar à Caixa</button>
        </div>
        <div class="message-screen" id="roundErrorMessage" style="display: none;">
            <span class="message-screen-span">Perdão...</span>
            <p class="message-screen-p">Infelizmente não foi possivel reconectar ao jogo.</p>
            <button onclick="backToBox()" class="primary-btn">Voltar à Caixa</button>
        </div>
        <div class="message-screen" id="kickMessage" style="display: none;">
            <span class="message-screen-span">Vish...</span>
            <p class="message-screen-p">O host da sala optou por te expulsar, você será redirecionado à caixa em instantes.</p>
            <button onclick="backToBox()" class="primary-btn">Voltar à Caixa</button>
            
        </div>
        <div id="userSelect" style="display: flex;">
            <swiper-container class="swiper-container" navigation="true">
                <swiper-slide>
                    <img class="character-img" src="/static/images/Berro.png " alt="">
                    <span id="character">Berro</span></swiper-slide>
                <swiper-slide>
                    <img class="character-img" src="/static/images/Davinte.png " alt="">
                    <span id="character">Davinte</span></swiper-slide>
                <swiper-slide>
                    <img class="character-img" src="/static/images/Vanderlei.png " alt="">
                    <span id="character">Vanderlei</span></swiper-slide>
                <swiper-slide>
                    <img class="character-img" src="/static/images/Empregada.png " alt="">
                    <span id="character">Empregada</span></swiper-slide>
                <swiper-slide>
                    <img class="character-img" src="/static/images/Maria.png " alt="">
                    <span id="character">Maria</span>
                </swiper-slide>
                <swiper-slide>
                    <img class="character-img" src="/static/images/Merda.png " alt="">
                    <span id="character">Merda</span>
                </swiper-slide>
            </swiper-container>
            <div class="sign">
                <input placeholder="Digite seu nome:" maxlength="8" class="fodao" type="text" id="username" name="username">
            </div>
            <button class="primary-btn" onclick="saveUsername()">Entrar</button> 
        </div>
    <div id="messages"></div>
    <div id="round1">
        <div id="drawingArea" style="display: none;">
            <div class="toolbar">
                <div class="tool-colors">
                    <button id="black" class="colors no-style-btn" onclick="setColor('black')"></button>
                    <button id="white" class="colors no-style-btn" onclick="setColor('white')"></button>
                    <button id="#FF0027" class="colors no-style-btn" onclick="setColor('#FF0027')"></button>
                    <button id="#990000" class="colors no-style-btn" onclick="setColor('#990000')"></button>
                    <button id="#00B02B" class="colors no-style-btn" onclick="setColor('#00B02B')"></button>
                    <button id="#017405" class="colors no-style-btn" onclick="setColor('#017405')"></button>
                    <button id="#0050FF" class="colors no-style-btn" onclick="setColor('#0050FF')"></button>
                    <button id="#003BB5" class="colors no-style-btn" onclick="setColor('#003BB5')"></button>
                    <button id="#FFC126" class="colors no-style-btn" onclick="setColor('#FFC126')"></button>
                    <button id="#B0701C" class="colors no-style-btn" onclick="setColor('#B0701C')"></button>
                    <button id="#D203D8" class="colors no-style-btn" onclick="setColor('#D203D8')"></button>
                    <button id="#99004E" class="colors no-style-btn" onclick="setColor('#99004E')"></button>
                    <input id="inputColor" type="color" class="colors no-style-btn" onchange="setColor(this.value)">
                    <div id="actualColor" class="actual-color"></div>
                </div>
            </div>
            <div class="drawing-section">
                <div id="drawingCounter">0/4</div>
                <canvas id="canvas" width="400" height="500"></canvas>
                <button class="primary-btn" id="exportDrawingBtn" onclick="exportDrawing()">Enviar Pintura</button> 
            </div>
            <div class="toolbar">
                <div class="tool-other">
                    <button class="primary-btn" id="bucketBtn"><img src="/static/images/player/bucket.svg" alt=""></button>
                    <button class="primary-btn" id="eraserBtn" onclick="setEraser(this)"><img src="/static/images/player/eraser.png" alt=""></button>
                    <button class="primary-btn brush-btn active" onclick="setBrushSize(5, this)"><img src="/static/images/player/bSize.png" alt=""></button>
                    <button class="primary-btn brush-btn" onclick="setBrushSize(10, this)"><img src="/static/images/player/bSize.png" alt=""></button>
                    <button class="primary-btn brush-btn" onclick="setBrushSize(20, this)"><img src="/static/images/player/bSize.png" alt=""></button>
                    <button class="primary-btn brush-btn" onclick="setBrushSize(30, this)"><img src="/static/images/player/bSize.png" alt=""></button>
                    <button class="primary-btn" onclick="undo()"><img src="/static/images/undo.svg" alt=""></button>
                    <button class="primary-btn" onclick="redo()"><img style="transform: scale(-1,1)" src="/static/images/undo.svg" alt=""></button>
                </div>
            </div>
        </div>
    </div>

    <div id="round2">
        <div id="phraseInput" style="display: none;">
            <span>Escreva uma frase!</span>
            <input placeholder="Escreva sua frase aqui" type="text" class="primary-btn" id="phrase" name="phrase">
            <button id="submitPhraseBtn" class="primary-btn" onclick="submitPhrase()">Enviar Frase</button>
        </div>
    </div>

    <div id="round3" style="display: none;">
        <div id="drawingList"></div>
        <div class="selection-container" id="combinationArea" style="display: flex;">
            <span class="primary-title">Combine um título com uma pintura:</span>
            <swiper-container id="swiperCombine" class="swiper-container" navigation="true">
 <!--               <swiper-slide>
                    <img src="/uploads/KCTB_534EZe8YXMKM_1722528836.png" alt="">
                    <span id="character">Berro</span>
                </swiper-slide>
                <swiper-slide>
                    <img src="/static/images/Berro.png " alt="">
                    <span id="character">Berro</span>
                </swiper-slide> -->
            </swiper-container>
            <select class="primary-select" id="phraseSelect">
                <option value=""></option>
            </select>
            <button class="primary-btn" onclick="combineSelection()">Combinar</button>
        </div>
    </div>

    <div id="round4">
        <div id="matchups"></div>
        <button class="primary-btn" id="sendVote" onclick="sendVote()">Enviar Voto</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script>
        const roomId = "{{ room_id }}";
    </script>
    <script src="/static/pgGame/scripts/player.js"></script>
</body>
</html>